function recruitWindow(){function e(){var e=Titanium.UI.createView({height:"100%",width:"100%",backgroundColor:"black",opacity:.3});n.add(e);var t=Titanium.UI.createView({height:170,left:30,right:30,borderRadius:3,borderWidth:3,borderColor:"#a0a0a0",backgroundColor:"white"});n.add(t);var o=Ti.UI.createLabel({top:20,right:10,left:10,textAlign:"center",color:"black",font:{fontSize:17},text:"マルチ募集を投稿しました"});t.add(o);var c=Ti.UI.createImageView({image:"images/recruit_guide_top_btn.png",bottom:70,right:"5%",left:"5%"});t.add(c),c.addEventListener("click",function(){n.remove(e),n.remove(t),n.close()});var d=Ti.UI.createImageView({image:"images/recruit_guide_multi_btn.png",bottom:20,right:"5%",left:"5%"});t.add(d),d.addEventListener("click",function(){recruitID=a,luck_restriction=r,Ti.Platform.openURL(i)})}function t(){var e=Ti.UI.createButton({title:"✓",color:"#DCDCDC",borderColor:"#666",borderWidth:2,borderRadius:3,backgroundColor:"white",backgroundImage:"none",font:{fontSize:25,fontWeight:"bold"},value:!1});return e.on=function(){this.color="#50B000",this.title="✓",this.value=!0},e.off=function(){this.color="#DCDCDC",this.title="✓",this.value=!1},e.addEventListener("click",function(e){0==e.source.value?e.source.on():e.source.off()}),e}var i,a,r,o=createActInd(),n=Titanium.UI.createWindow({statusBarStyle:Titanium.UI.iPhone.StatusBar.LIGHT_CONTENT,barImage:"images/header.png",titleControl:Ti.UI.createImageView({image:"images/recruit_title_label.png",height:23,width:169})});n.hideTabBar();var c=Titanium.UI.createButton({backgroundImage:"images/back_btn.png",width:50.3,height:32});n.leftNavButton=c,c.addEventListener("click",function(){n.close()});var d=Titanium.UI.createScrollView({contentWidth:"auto",contentHeight:"auto",top:0,backgroundColor:"black",showVerticalScrollIndicator:!0});n.add(d);var l=Titanium.UI.createView({backgroundColor:"black",height:620}),s=Titanium.UI.createView({width:"95%",top:10,bottom:10,height:590,borderRadius:3,borderWidth:3,borderColor:"#a0a0a0",backgroundColor:"white"}),u=Titanium.UI.createLabel({text:"キャラパクやチートなどの迷惑行為は禁止です。\n迷惑行為をした場合、本アプリの利用を禁止する場合がございます。",top:20,left:"5%",right:"5%",color:"red",font:{fontSize:12}});s.add(u);var h=Titanium.UI.createImageView({image:"images/recruit_luck_label.png",top:80,left:"5%",width:113,height:22});s.add(h);var g=t();g.top=110,g.left=30,g.height=30,g.width=30,s.add(g);var T=Titanium.UI.createLabel({text:"運極のみを募集したい場合は、チェックを入れてください。",top:110,left:"25%",right:"5%",color:"red",font:{fontSize:12}});s.add(T);var p=Titanium.UI.createImageView({image:"images/recruit_desc_label.png",top:160,left:"5%",width:80,height:21});s.add(p);var b,m,v,f="募集の条件や参加して欲しいモンスターを記入してください";""==Ti.App.Properties.getString("desc")?(b=f,m="gray",v=0):(b=Ti.App.Properties.getString("desc"),m="black",v=Ti.App.Properties.getString("desc").length);var w=Titanium.UI.createTextArea({value:b,top:185,height:60,left:"5%",right:"5%",textAlign:"left",borderRadius:5,borderColor:"black",color:m,backgroundColor:"white",font:{fontSize:15},borderStyle:Titanium.UI.INPUT_BORDERSTYLE_ROUNDED,appearance:Titanium.UI.KEYBOARD_APPEARANCE_ALERT,keyboardType:Titanium.UI.KEYBOARD_DEFAULT,returnKeyType:Titanium.UI.RETURNKEY_DONE});s.add(w),w._hintText=f,w.addEventListener("focus",function(e){e.source.value==e.source._hintText&&(e.source.value="")}),w.addEventListener("blur",function(e){""==e.source.value?(e.source.value=f,e.source.color="gray"):e.source.color="black"});var I=Titanium.UI.createLabel({text:v,top:160,right:"5%",textAlign:Ti.UI.TEXT_ALIGNMENT_RIGHT,color:"black",font:{fontSize:18}});s.add(I),w.addEventListener("change",function(){I.text=w.value.length,I.color=w.value.length>50?"red":"black"});var k=Titanium.UI.createImageView({image:"images/recruit_url_label.png",top:260,left:"5%",width:107,height:20});s.add(k);var U=Titanium.UI.createTextArea({value:"（例）\nモンストでマルチしない？\n「タスの巣窟（パワタスキング！）」\nhttp://static.monster-strike.com/line/?pass_code=XXXXXXXXXXXX\n↑このURLをタップすると、タップした人達同士で一緒にマルチプレイができるよ！",top:285,height:175,left:"5%",right:"5%",textAlign:"left",borderRadius:5,borderColor:"black",color:"gray",backgroundColor:"white",font:{fontSize:15},borderStyle:Titanium.UI.INPUT_BORDERSTYLE_ROUNDED,appearance:Titanium.UI.KEYBOARD_APPEARANCE_ALERT,keyboardType:Titanium.UI.KEYBOARD_DEFAULT,returnKeyType:Titanium.UI.RETURNKEY_DONE});s.add(U),U._hintText=U.value,U.addEventListener("focus",function(e){e.source.value==e.source._hintText&&(e.source.value="")}),U.addEventListener("blur",function(e){""==e.source.value?(e.source.value=e.source._hintText,e.source.color="gray"):e.source.color="black"});var A=Titanium.UI.createLabel({text:0,top:260,right:"5%",length:100,textAlign:Ti.UI.TEXT_ALIGNMENT_RIGHT,color:"black",font:{fontSize:18}});s.add(A),U.addEventListener("change",function(){A.text=U.value.length,A.color=U.value.length>300?"red":"black"});var E=t();E.top=470,E.left=30,E.height=30,E.width=30,E.on(),s.add(E);var _=Titanium.UI.createLabel({text:"利用規約に同意する",top:470,height:30,left:70,right:30,verticalAlign:Ti.UI.TEXT_VERTICAL_ALIGNMENT_CENTER,color:"blue",font:{fontSize:14}});s.add(_),_.addEventListener("click",function(){var e=Titanium.UI.createWindow({statusBarStyle:Titanium.UI.iPhone.StatusBar.LIGHT_CONTENT,barImage:"images/header.png",titleControl:Ti.UI.createLabel({text:"利用規約",font:{fontWeight:"bold",fontSize:19},color:"white",height:24,width:88})});e.hideTabBar();var t=Titanium.UI.createButton({backgroundImage:"images/back_btn.png",width:50.3,height:32});e.leftNavButton=t,t.addEventListener("click",function(){e.close()}),webView=Ti.UI.createWebView({url:"/tos.html",backgroundColor:"white"}),e.add(webView),tabGroup.activeTab.open(e)});var L=Ti.UI.createImageView({top:505,left:"5%",right:"5%",image:"images/recruit_submit_btn.png"});return s.add(L),L.addEventListener("click",function(){o.show(),w.blur(),U.blur();var t="";(null==U.value||""==U.value)&&(t+="マルチURLを入力してください\n"),0==E.value&&(t+="利用規約に同意されない場合は投稿できません\n"),w.value.length>50&&(t+="募集内容を50文字以内にしてください\n");var n=U.value.indexOf("http://static.monster-strike.com/line/?pass_code=",0);-1==n&&(t+="LINE募集のテキストをそのまま貼り付けてください\n");var c=U.value.indexOf("http://static.monster-strike.com/line/?pass_code=XXXXXXXXXXXX",0);if(-1!=c&&(t+="LINE募集のテキストをそのまま貼り付けてください\n"),""!=t)o.hide(),Ti.UI.createAlertDialog({message:t}).show();else{var d;"募集の条件や参加して欲しいモンスターを記入してください"==w.value?(d="",Ti.App.Properties.setString("desc",d)):(d=w.value,Ti.App.Properties.setString("desc",d));var l={user_id:Ti.App.Properties.getString("uid"),luck:g.value,description:d,url:U.value};url=Ti.App.domain+"create_recruit.json",sendData(url,l,function(t){if(t.success){var n=t.data;i=n.url,a=n.id,recruitID=a,r=n.luck_restriction,luck_restriction=r,Ti.Platform.openURL(i),e()}else alert("通信に失敗しました");o.hide()})}}),l.add(s),d.add(l),n.add(o),n}module.exports=recruitWindow;