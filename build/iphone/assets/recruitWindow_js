function recruitWindow(){function e(){var e=Titanium.UI.createView({height:"100%",width:"100%",backgroundColor:"black",opacity:.3});o.add(e);var t=Titanium.UI.createView({height:170,left:30,right:30,borderRadius:3,borderWidth:3,borderColor:"#a0a0a0",backgroundColor:"white"});o.add(t);var n=Ti.UI.createLabel({top:20,right:10,left:10,textAlign:"center",color:"black",font:{fontSize:17},text:"マルチ募集を投稿しました"});t.add(n);var c=Ti.UI.createImageView({image:"images/recruit_guide_top_btn.png",bottom:70,right:"5%",left:"5%"});t.add(c),c.addEventListener("click",function(){o.remove(e),o.remove(t),o.close()});var l=Ti.UI.createImageView({image:"images/recruit_guide_multi_btn.png",bottom:20,right:"5%",left:"5%"});t.add(l),l.addEventListener("click",function(){recruitID=a,luck_restriction=r,Ti.Platform.openURL(i)})}function t(){var e=Ti.UI.createButton({title:"✓",color:"#DCDCDC",borderColor:"#666",borderWidth:2,borderRadius:3,backgroundColor:"white",backgroundImage:"none",font:{fontSize:25,fontWeight:"bold"},value:!1});return e.on=function(){this.color="#50B000",this.title="✓",this.value=!0},e.off=function(){this.color="#DCDCDC",this.title="✓",this.value=!1},e.addEventListener("click",function(e){0==e.source.value?e.source.on():e.source.off()}),e}var i,a,r,n=createActInd(),o=Titanium.UI.createWindow({statusBarStyle:Titanium.UI.iPhone.StatusBar.LIGHT_CONTENT,barImage:"images/header.png",titleControl:Ti.UI.createImageView({image:"images/recruit_title_label.png",height:23,width:169})});o.hideTabBar();var c=Titanium.UI.createButton({backgroundImage:"images/back_btn.png",width:50.3,height:32});o.leftNavButton=c,c.addEventListener("click",function(){o.close()});var l=Titanium.UI.createScrollView({contentWidth:"auto",contentHeight:"auto",top:0,backgroundColor:"black",showVerticalScrollIndicator:!0});o.add(l);var d=Titanium.UI.createView({backgroundColor:"black",height:620}),s=Titanium.UI.createView({width:"95%",top:10,bottom:10,height:590,borderRadius:3,borderWidth:3,borderColor:"#a0a0a0",backgroundColor:"white"}),u=Titanium.UI.createLabel({text:"キャラパクやチートなどの迷惑行為は禁止です。\n迷惑行為をした場合、本アプリの利用を禁止する場合がございます。",top:20,left:"5%",right:"5%",color:"red",font:{fontSize:12}});s.add(u);var g=Titanium.UI.createImageView({image:"images/recruit_luck_label.png",top:80,left:"5%",width:113,height:22});s.add(g);var p=t();p.top=110,p.left=30,p.height=30,p.width=30,s.add(p);var h=Titanium.UI.createLabel({text:"運極のみを募集したい場合は、チェックを入れてください。",top:110,left:"25%",right:"5%",color:"red",font:{fontSize:12}});s.add(h);var b=Titanium.UI.createImageView({image:"images/recruit_desc_label.png",top:160,left:"5%",width:80,height:21});s.add(b);var T,m,f,v="募集の条件や参加して欲しいモンスターを記入してください";""==Ti.App.Properties.getString("desc")?(T=v,m="gray",f=0):(T=Ti.App.Properties.getString("desc"),m="black",f=Ti.App.Properties.getString("desc").length);var I=Titanium.UI.createTextArea({value:T,top:185,height:60,left:"5%",right:"5%",textAlign:"left",borderRadius:5,borderColor:"black",color:m,backgroundColor:"white",font:{fontSize:15},borderStyle:Titanium.UI.INPUT_BORDERSTYLE_ROUNDED,appearance:Titanium.UI.KEYBOARD_APPEARANCE_ALERT,keyboardType:Titanium.UI.KEYBOARD_DEFAULT,returnKeyType:Titanium.UI.RETURNKEY_DONE});s.add(I),I._hintText=v,I.addEventListener("focus",function(e){e.source.value==e.source._hintText&&(e.source.value="")}),I.addEventListener("blur",function(e){""==e.source.value?(e.source.value=v,e.source.color="gray"):e.source.color="black"});var w=Titanium.UI.createLabel({text:f,top:160,right:"5%",textAlign:Ti.UI.TEXT_ALIGNMENT_RIGHT,color:"black",font:{fontSize:18}});s.add(w),I.addEventListener("change",function(){w.text=I.value.length,w.color=I.value.length>50?"red":"black"});var k=Titanium.UI.createImageView({image:"images/recruit_url_label.png",top:260,left:"5%",width:107,height:20});s.add(k);var U=Titanium.UI.createTextArea({value:"（例）\nモンストでマルチしない？\n「タスの巣窟（パワタスキング！）」\nhttp://static.monster-strike.com/line/?pass_code=XXXXXXXXXXXX\n↑このURLをタップすると、タップした人達同士で一緒にマルチプレイができるよ！",top:285,height:200,left:"5%",right:"5%",textAlign:"left",borderRadius:5,borderColor:"black",color:"gray",backgroundColor:"white",font:{fontSize:15},borderStyle:Titanium.UI.INPUT_BORDERSTYLE_ROUNDED,appearance:Titanium.UI.KEYBOARD_APPEARANCE_ALERT,keyboardType:Titanium.UI.KEYBOARD_DEFAULT,returnKeyType:Titanium.UI.RETURNKEY_DONE});s.add(U),U._hintText=U.value,U.addEventListener("focus",function(e){e.source.value==e.source._hintText&&(e.source.value="")}),U.addEventListener("blur",function(e){""==e.source.value?(e.source.value=e.source._hintText,e.source.color="gray"):e.source.color="black"});var _=Titanium.UI.createLabel({text:0,top:260,right:"5%",length:100,textAlign:Ti.UI.TEXT_ALIGNMENT_RIGHT,color:"black",font:{fontSize:18}});s.add(_),U.addEventListener("change",function(){_.text=U.value.length,_.color=U.value.length>300?"red":"black"});var A=Ti.UI.createImageView({top:505,left:"5%",right:"5%",image:"images/recruit_submit_btn.png"});return s.add(A),A.addEventListener("click",function(){n.show(),I.blur(),U.blur();var t="";(null==U.value||""==U.value)&&(t+="マルチURLを入力してください\n"),I.value.length>50&&(t+="募集内容を50文字以内にしてください\n");var o=U.value.indexOf("http://static.monster-strike.com/line/?pass_code=",0);-1==o&&(t+="LINE募集のテキストをそのまま貼り付けてください\n");var c=U.value.indexOf("http://static.monster-strike.com/line/?pass_code=XXXXXXXXXXXX",0);if(-1!=c&&(t+="LINE募集のテキストをそのまま貼り付けてください\n"),""!=t)n.hide(),Ti.UI.createAlertDialog({message:t}).show();else{var l;"募集の条件や参加して欲しいモンスターを記入してください"==I.value?(l="",Ti.App.Properties.setString("desc",l)):(l=I.value,Ti.App.Properties.setString("desc",l));var d={user_id:Ti.App.Properties.getString("uid"),luck:p.value,description:l,url:U.value};url=Ti.App.domain+"create_recruit.json",sendData(url,d,function(t){if(t.success){var o=t.data;i=o.url,a=o.id,recruitID=a,r=o.luck_restriction,luck_restriction=r,Ti.Platform.openURL(i),e()}else alert("通信に失敗しました");n.hide()})}}),d.add(s),l.add(d),o.add(n),o}module.exports=recruitWindow;