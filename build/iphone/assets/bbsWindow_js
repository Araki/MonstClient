function bbsWindow(){function e(){var e=[],i=0,r=Ti.App.domain+"get_recruit.json";getData(r,function(r){if(r.success){for(var o=r.data,d=0;d<o.length;d++)-1!=o[d].tags.indexOf(a)&&(e[i]=o[d],i+=1);e.length>=10?t(e,0,10):t(e,0,e.length)}n.hide()})}function t(t,r,o){if(n.show(),0==t.length){var a=Ti.UI.createTableViewRow({hasChild:!1,height:450,id:"",touchEnabled:!1,selectionStyle:Titanium.UI.iPhone.TableViewCellSelectionStyle.NONE,backgroundColor:"black"}),c=Ti.UI.createLabel({text:"検索条件に合うクエストがありませんでした。\n\n検索条件に合うクエストが投稿されるまで更新し続けるか、\n\n検索条件を変更してください。",font:{fontWeight:"bold",fontSize:11},color:"white",textAlign:"center",verticalAlign:Titanium.UI.TEXT_VERTICAL_ALIGNMENT_CENTER,right:20,left:20,top:30,height:80});a.add(c);var s=nend.createView({top:130,left:(Ti.Platform.displayCaps.platformWidth-300)/2,spotId:"285501",apiKey:"7eafcb13dd674b523ec63c14db2f14aae7aaa89e"});a.add(s);var u=Ti.UI.createButton({title:"更 新",font:{fontWeight:"bold",fontSize:18},top:400,right:70,left:70,height:40,color:"white",backgroundColor:"#77A82C",borderRadius:5});a.add(u),u.addEventListener("click",function(){n.show(),d=[],e(),l.scrollToTop(0,!0)}),d.push(a)}else for(var h=r;o>h;h++){if(h%10==0){var p=i(1);d.push(p)}if(h%10==5){var p=i(2);d.push(p)}var T,a=Ti.UI.createTableViewRow({backgroundImage:"images/bbs_row_bg.png",hasChild:!1,height:73,id:"row",data:t[h]});T=null==t[h].image?"https://s3-ap-northeast-1.amazonaws.com/monsto/icon/noimage.png":t[h].image;var g=Titanium.UI.createImageView({top:7,left:9,width:55,height:55,image:T});a.add(g);var b=Titanium.UI.createLabel({font:{fontWeight:"bold",fontSize:13},textAlign:"left",verticalAlign:Titanium.UI.TEXT_VERTICAL_ALIGNMENT_TOP,color:"black",left:70,right:5,top:7,height:15,text:t[h].name});a.add(b);var m=Titanium.UI.createTextArea({editable:!1,touchEnabled:!1,font:{fontSize:11},textAlign:"left",color:"black",left:70,right:5,top:23,bottom:23,value:t[h].desc});a.add(m);var f=Titanium.UI.createLabel({font:{fontSize:10},textAlign:"right",verticalAlign:Titanium.UI.TEXT_VERTICAL_ALIGNMENT_TOP,color:"black",right:9,bottom:10,width:100,text:t[h].time});a.add(f);var v=Titanium.UI.createLabel({font:{fontWeight:"bold",fontSize:10},textAlign:"left",verticalAlign:Titanium.UI.TEXT_VERTICAL_ALIGNMENT_TOP,color:"black",left:70,bottom:10,width:100,text:"アクセス数: "+t[h].access});if(a.add(v),"t"==t[h].luck_restriction){var w=Titanium.UI.createLabel({font:{fontWeight:"bold",fontSize:10},textAlign:"center",verticalAlign:Titanium.UI.TEXT_VERTICAL_ALIGNMENT_CENTER,color:"white",right:9,top:7,height:15,width:50,backgroundColor:"red",borderRadius:2,text:"運極限定"});a.add(w),b.right=59}d.push(a)}var I;if(o==t.length);else{I=o+10<=t.length?o+10:t.length;var k=Ti.UI.createTableViewRow({hasChild:!1,height:25,backgroundColor:"red",id:"addRow",data:t,startNum:o,endNum:I});addRowLabel=Ti.UI.createLabel({text:"次の結果を読み込む",color:"white",font:{fontSize:13}}),k.add(addRowLabel),d.push(k);var A=i(3);d.push(A)}l.data=d,n.hide()}function i(e){var t=createBannerAdView(e),i=Ti.UI.createTableViewRow({hasChild:!1,height:50});if(320!=Ti.Platform.displayCaps.platformWidth){var r=Ti.Platform.displayCaps.platformWidth/320*50;i.height=r,t.top=(r-50)/2}return i.add(t),i}function r(){var t=Titanium.UI.createView({backgroundColor:"black",opacity:.3});c.add(t);var i=Titanium.UI.createView({width:300,height:400,backgroundColor:"white",borderRadius:5});c.add(i);var r=Ti.UI.createButton({title:"全て",top:15,left:15,height:40,width:130,color:"white",backgroundColor:"#00A5CD",borderRadius:5});i.add(r),r.addEventListener("click",function(){n.show(),p.text="　全て",a="",d=[],e(),l.scrollToTop(0,!0),c.remove(t),c.remove(i)});var o=Ti.UI.createButton({title:"降臨",top:15,right:15,height:40,width:130,color:"white",backgroundColor:"#00A5CD",borderRadius:5});i.add(o),o.addEventListener("click",function(){n.show(),p.text="　降臨",a="kourin",d=[],e(),l.scrollToTop(0,!0),c.remove(t),c.remove(i)});var s=Ti.UI.createButton({title:"チケット",top:70,right:15,height:40,width:130,color:"white",backgroundColor:"#00A5CD",borderRadius:5});i.add(s),s.addEventListener("click",function(){n.show(),p.text="　チケット",a="ticket",d=[],e(),l.scrollToTop(0,!0),c.remove(t),c.remove(i)});var u=Ti.UI.createButton({title:"超絶",top:70,left:15,height:40,width:130,color:"white",backgroundColor:"#00A5CD",borderRadius:5});i.add(u),u.addEventListener("click",function(){n.show(),p.text="　超絶",a="chouzetsu",d=[],e(),l.scrollToTop(0,!0),c.remove(t),c.remove(i)});var h=Ti.UI.createButton({title:"獣神玉",top:125,left:15,height:40,width:130,color:"white",backgroundColor:"#00A5CD",borderRadius:5});i.add(h),h.addEventListener("click",function(){n.show(),p.text="　獣神玉",a="zyushindama",d=[],e(),l.scrollToTop(0,!0),c.remove(t),c.remove(i)});var T=Ti.UI.createButton({title:"亀",top:125,right:15,height:40,width:130,color:"white",backgroundColor:"#00A5CD",borderRadius:5});i.add(T),T.addEventListener("click",function(){n.show(),p.text="　亀",a="kame",d=[],e(),l.scrollToTop(0,!0),c.remove(t),c.remove(i)});var g=Ti.UI.createButton({title:"ムラサメ",top:180,left:15,height:40,width:130,color:"white",backgroundColor:"#00A5CD",borderRadius:5});i.add(g),g.addEventListener("click",function(){n.show(),p.text="　ムラサメ",a="murasame",d=[],e(),l.scrollToTop(0,!0),c.remove(t),c.remove(i)});var b=Ti.UI.createButton({title:"ムラマサ",top:180,right:15,height:40,width:130,color:"white",backgroundColor:"#00A5CD",borderRadius:5});i.add(b),b.addEventListener("click",function(){n.show(),p.text="　ムラマサ",a="muramasa",d=[],e(),l.scrollToTop(0,!0),c.remove(t),c.remove(i)});var m=Ti.UI.createButton({title:"パワタスキング",top:235,left:15,height:40,width:130,color:"white",backgroundColor:"#00A5CD",borderRadius:5});i.add(m),m.addEventListener("click",function(){n.show(),p.text="　パワタスキング",a="pawatasu",d=[],e(),l.scrollToTop(0,!0),c.remove(t),c.remove(i)});var f=Ti.UI.createButton({title:"タス",top:235,right:15,height:40,width:130,color:"white",backgroundColor:"#00A5CD",borderRadius:5});i.add(f),f.addEventListener("click",function(){n.show(),p.text="　タス",a="tasu",d=[],e(),l.scrollToTop(0,!0),c.remove(t),c.remove(i)});var v=Ti.UI.createButton({title:"ゴールド",top:290,left:15,height:40,width:130,color:"white",backgroundColor:"#00A5CD",borderRadius:5});i.add(v),v.addEventListener("click",function(){n.show(),p.text="　ゴールド",a="gold",d=[],e(),l.scrollToTop(0,!0),c.remove(t),c.remove(i)});var w=Ti.UI.createButton({title:"英雄の神殿",top:290,right:15,height:40,width:130,color:"white",backgroundColor:"#00A5CD",borderRadius:5});i.add(w),w.addEventListener("click",function(){n.show(),p.text="　英雄の神殿",a="wakuwaku",d=[],e(),l.scrollToTop(0,!0),c.remove(t),c.remove(i)});var I=Ti.UI.createButton({title:"閉じる",top:350,right:15,left:15,height:30,color:"white",backgroundColor:"#707070",borderRadius:5});i.add(I),I.addEventListener("click",function(){c.remove(t),c.remove(i)})}if(null==Ti.App.Properties.getString("installed")){Ti.App.Properties.setString("installed",1);var o=Titanium.UI.createAlertDialog({title:"モンスターストライクはインストールされていますか？",message:"\n本アプリはモンスターストライクがインストールされていないと利用できません。\n\nインストールされていない方がインストールしてからご利用ください。",buttonNames:["OK"],cancel:0});o.show()}var a="",n=createActInd();n.show();var d=[],c=Titanium.UI.createWindow({statusBarStyle:Titanium.UI.iPhone.StatusBar.LIGHT_CONTENT,barImage:"images/header.png",titleControl:Ti.UI.createImageView({image:"images/bbs_title_label.png",height:23,width:128})});c.hideTabBar();var l=Titanium.UI.createTableView({top:0,bottom:0,separatorStyle:"NONE",backgroundColor:"black"});c.add(l);var s=Titanium.UI.createButton({backgroundImage:"images/bbs_recruit_btn.png",height:32,width:52.1});c.leftNavButton=s,s.addEventListener("click",function(){var e=require("recruitWindow"),t=new e;tabGroup.activeTab.open(t)});var u=Titanium.UI.createButton({backgroundImage:"images/bbs_reload_btn.png",height:32,width:43.9});c.rightNavButton=u,u.addEventListener("click",function(){n.show(),d=[],e(),l.scrollToTop(0,!0)}),l.addEventListener("click",function(e){if("addRow"==e.row.id)d.pop(),d.pop(),t(e.row.data,e.row.startNum,e.row.endNum);else if("row"==e.row.id)if("t"==e.row.data.luck_restriction){var i=Titanium.UI.createAlertDialog({title:"運極限定マルチ",message:"\n運極の方のみ参加可能なマルチです。\n運極でない方のご参加は\n他の方の迷惑となります。\n運極でない方の参加を見つけた場合、その方の本サービスの利用を禁止するなどの対処を致します。",buttonNames:["参加しない","参加する"],cancel:0});i.addEventListener("click",function(t){if(1==t.index){var i=require("detailWindow"),r=new i(e.row.data);tabGroup.activeTab.open(r)}}),i.show()}else{Ti.API.info("name = "+e.row.data.name+"\ndesc = "+e.row.data.desc+"\nimage = "+e.row.data.image);var r=require("detailWindow"),o=new r(e.row.data);tabGroup.activeTab.open(o)}});var h=Ti.UI.createImageView({bottom:15,right:15,width:40,height:40,image:"images/search_button.png"});c.add(h),h.addEventListener("click",function(){r()});var p=Ti.UI.createLabel({text:"　全て",backgroundColor:"black",opacity:.7,borderStyle:Titanium.UI.INPUT_BORDERSTYLE_ROUNDED,font:{fontSize:13},verticalAlign:Titanium.UI.TEXT_VERTICAL_ALIGNMENT_CENTER,bottom:15,right:65,left:15,height:40,enabled:!1,color:"white",keyboardToolbar:!1,borderRadius:5});return c.add(p),e(),c.add(n),c}module.exports=bbsWindow;