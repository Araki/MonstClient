function createBannerAdView(e){var i,r,t;switch(e){case 1:i="284930",r="7bb422477552bc39eb05b0bd1f6fe88e71edb13b",t="ca-app-pub-8392863952863215/5215089280";break;case 2:i="287241",r="204bfde6ecc0ba1e66a0d551b2acd148eb6e648a",t="ca-app-pub-8392863952863215/5215089280";break;case 3:i="287242",r="f4ce7c6f230f5c31d518882fcd1e44caf93cb73f",t="ca-app-pub-8392863952863215/5215089280";break;default:i="",r="",t=""}var a=Math.floor(2*Math.random());switch(a){case 0:var n=Admob.createView({width:320,height:50,adUnitId:t,adBackgroundColor:"white"});break;case 1:var n=nend.createView({width:320,height:50,spotId:i,apiKey:r});break;default:var n=null}if(320!=Ti.Platform.displayCaps.platformWidth){var o=Ti.UI.create2DMatrix();o=o.scale(Ti.Platform.displayCaps.platformWidth/320),n.transform=o}return n}function createActInd(){var e=Titanium.UI.createActivityIndicator({height:"100%",width:"100%",font:{fontSize:16},color:"white",backgroundColor:"black",opacity:.3,style:"iPhone OS"===Ti.Platform.name?Ti.UI.iPhone.ActivityIndicatorStyle.BIG:Ti.UI.ActivityIndicatorStyle.BIG});return e}function checkLogin(){var e={uid:iOSUniqueID.getUUID,version:Ti.App.version},i=Ti.App.domain+"check_user.json";sendData(i,e,function(e){if(e.success)if(obj=e.data,"development"==obj.version){alert("ステージング環境"),Ti.App.domain="https://monstbbs-stg.herokuapp.com/";var i={uid:iOSUniqueID.getUUID,version:Ti.App.version},r=Ti.App.domain+"check_user.json";sendData(r,i,function(e){if(e.success)switch(obj=e.data,obj.result){case"new":loginProcess();break;case"not_deleted":loginProcess();break;case"deleted":alert("迷惑行為と見なされたため、只今ご利用できません。\n再度、利用されたい場合はお問い合わせください。");break;case"error":alert("通信に失敗しました")}else Ti.UI.createAlertDialog({title:"通信に失敗しました"}).show()})}else if("update"==obj.version){var t=Ti.UI.createAlertDialog({message:"アプリを最新版にアップデートしてください",buttonNames:["アップデート"]});t.addEventListener("click",function(e){0==e.index&&Ti.Platform.openURL(obj.update_url)}),t.show()}else switch(obj.result){case"new":loginProcess();break;case"not_deleted":loginProcess();break;case"deleted":alert("迷惑行為と見なされたため、只今ご利用できません。\n再度、利用されたい場合はお問い合わせください。");break;case"error":alert("通信に失敗しました")}else Ti.UI.createAlertDialog({title:"通信に失敗しました"}).show()})}function loginProcess(){Ti.App.Properties.setString("uuid",obj.uuid),Ti.App.Properties.setString("uid",obj.id),null==Ti.App.Properties.getString("desc")&&Ti.App.Properties.setString("desc",""),createTabGroup()}function createTabGroup(){tabGroup=Titanium.UI.createTabGroup({top:20});var e=require("bbsWindow"),i=new e,r=Titanium.UI.createTab({icon:"KS_nav_views.png",title:"Tab 1",window:i});tabGroup.addTab(r),tabGroup.open()}function sendData(e,i,r){var t=e,a=i,n=Titanium.Network.createHTTPClient();n.timeout=1e4,n.open("POST",t),n.onload=function(){r({success:!0,data:JSON.parse(this.responseText)})},n.onerror=function(e){r({success:!1,data:e})},n.send(a)}function getData(e,i){var r=e,t=Titanium.Network.createHTTPClient();t.timeout=1e4,t.open("GET",r),t.onload=function(){i({success:!0,data:JSON.parse(this.responseText)})},t.onerror=function(e){i({success:!1,data:e})},t.send()}Ti.App.domain="https://monstbbs.herokuapp.com/";var Admob=require("ti.admob"),nend=require("net.nend"),iOSUniqueID=require("com.joseandro.uniqueids"),Flurry=require("com.onecowstanding.flurry");switch(Flurry.appVersion=Ti.App.version,Flurry.debugLogEnabled=!0,Flurry.eventLoggingEnabled=!0,Flurry.sessionReportsOnCloseEnabled=!0,Flurry.sessionReportsOnPauseEnabled=!0,Flurry.sessionReportsOnActivityChangeEnabled=!0,Flurry.secureTransportEnabled=!1,Flurry.crashReportingEnabled=!0,Ti.Platform.osname){case"iphone":Flurry.startSession("3FPSMSFH54X7KN7JKH28");break;case"ipad":break;case"android":}Flurry.logAllPageViews();var displayWidth=Titanium.Platform.displayCaps.platformWidth,displayHeight=Titanium.Platform.displayCaps.platformHeight;Ti.API.info("Width: "+displayWidth+"\nHeight: "+displayHeight),Titanium.UI.setBackgroundColor("black");var recruitID="",luck_restriction="",tabGroup;checkLogin(),Ti.App.addEventListener("resume",function(){if(""!=recruitID&&(1==luck_restriction||"t"==luck_restriction)){rID=recruitID,recruitID="",luck_restriction="";var e=Titanium.UI.createAlertDialog({title:"迷惑行為撲滅のため\nアンケートに\nご協力ください",message:"先ほどのマルチ募集で運極（ラック極）は何人いましたか？",buttonNames:["全員運極だった","運極は3人","運極は2人","運極は1人","運極は誰もいなかった","わからない","マルチに入れなかった","アンケートに答えない"],cancel:7});e.addEventListener("click",function(e){var i={user_id:Ti.App.Properties.getString("uid"),recruit_id:rID,answer:e.index};url=Ti.App.domain+"send_answer.json",sendData(url,i,function(){})}),e.show()}});